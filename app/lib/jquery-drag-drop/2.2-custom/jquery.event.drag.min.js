!function(a){"use strict";a.fn.dragIt=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("dragit")&&(e="dragit"+e),d=(b===f?c:d)||{},f?this.on(e,d,f):this.trigger(e)};var b=a.event,c=b.special,d=c.dragit={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(b){var c=a.data(this,d.datakey),e=b.data||{};c.related+=1,a.each(d.defaults,function(a){void 0!==e[a]&&(c[a]=e[a])})},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(!a.data(this,d.datakey)){var b=a.extend({related:0},d.defaults);a.data(this,d.datakey,b),a(this).on("longtouch mousedown",b,d.init),this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var b=a.data(this,d.datakey)||{};b.related||(a.removeData(this,d.datakey),a(this).off("longtouch mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(b){if(!d.touched){var e,f=b.data;if(!(0!==b.which&&f.which>0&&b.which!==f.which||a(b.target).is(f.not)||f.handle&&!a(b.target).closest(f.handle,b.currentTarget).length||(d.touched="longtouch"===b.type?this:null,f.propagates=1,f.mousedown=this,f.interactions=[d.interaction(this,f)],f.target=b.target,f.pageX=b.pageX,f.pageY=b.pageY,f.dragging=null,e=d.hijack(b,"dragitinit",f),!f.propagates)))return e=d.flatten(e),e&&e.length&&(f.interactions=[],a.each(e,function(){f.interactions.push(d.interaction(this,f))})),f.propagates=f.interactions.length,f.drop!==!1&&c.dropit&&c.dropit.handler(b,f),d.textselect(!1),d.touched?a(d.touched).on("touchmove.dragit touchend.dragit",f,d.handler).trigger("touchmove"):a(document).on("mousemove.dragit mouseup.dragit",f,d.handler),!d.touched||f.live?!1:void 0}},interaction:function(b,c){var e=a(b)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:b,callback:new d.callback,droppable:[],offset:e}},handler:function(b){var e=b.data;switch(b.type){case!e.dragging&&"touchmove":b.preventDefault();case!e.dragging&&"mousemove":if(Math.pow(b.pageX-e.pageX,2)+Math.pow(b.pageY-e.pageY,2)<Math.pow(e.distance,2))break;b.target=e.target,d.hijack(b,"dragitstart",e),e.propagates&&(e.dragging=!0);case"touchmove":b.preventDefault();case"mousemove":if(e.dragging){if(d.hijack(b,"dragit",e),e.propagates){e.drop!==!1&&c.dropit&&c.dropit.handler(b,e);break}b.type="mouseup"}case"touchend":case"mouseup":default:d.touched?a(d.touched).off("touchmove.dragit touchend.dragit",d.handler):a(document).off("mousemove.dragit  mouseup.dragit",d.handler),e.dragging&&(e.drop!==!1&&c.dropit&&c.dropit.handler(b,e),d.hijack(b,"dragitend",e)),d.textselect(!0),e.click===!1&&e.dragging&&a.data(e.mousedown,"suppress.click",(new Date).getTime()+5),e.dragging=d.touched=!1}},hijack:function(c,e,f,g,h){if(f){var i,j,k,l={event:c.originalEvent,type:c.type},m=e.indexOf("drop")?"drag":"drop",n=g||0,o=isNaN(g)?f.interactions.length:g;c.type=e,c.originalEvent=null,f.results=[];do if(j=f.interactions[n]){if("dragitend"!==e&&j.cancelled)continue;k=d.properties(c,f,j),j.results=[],a(h||j[m]||f.droppable).each(function(g,h){return k.target=h,c.isPropagationStopped=function(){return!1},i=h?b.dispatch.call(h,c,k):null,i===!1?("drag"===m&&(j.cancelled=!0,f.propagates-=1),"dropit"===e&&(j[m][g]=null)):"dropitinit"===e&&j.droppable.push(d.element(i)||h),"dragitstart"===e&&(j.proxy=a(d.element(i)||j.drag)[0]),j.results.push(i),delete c.result,"dropitinit"!==e?i:void 0}),f.results[n]=d.flatten(j.results),"dropitinit"===e&&(j.droppable=d.flatten(j.droppable)),"dragitstart"!==e||j.cancelled||k.update()}while(++n<o);return c.type=l.type,c.originalEvent=l.event,d.flatten(f.results)}},properties:function(a,b,c){var e=c.callback;return e.drag=c.drag,e.proxy=c.proxy||c.drag,e.startX=b.pageX,e.startY=b.pageY,e.deltaX=a.pageX-b.pageX,e.deltaY=a.pageY-b.pageY,e.originalX=c.offset.left,e.originalY=c.offset.top,e.offsetX=e.originalX+e.deltaX,e.offsetY=e.originalY+e.deltaY,e.drop=d.flatten((c.drop||[]).slice()),e.available=d.flatten((c.droppable||[]).slice()),e},element:function(a){return a&&(a.jquery||1===a.nodeType)?a:void 0},flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):b})},textselect:function(b){a(document)[b?"off":"on"]("selectstart",d.dontstart).css("MozUserSelect",b?"":"none"),document.unselectable=b?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.dropit&&this.available.length&&a.each(this.available,function(a){c.dropit.locate(this,a)})}};var e=b.dispatch;b.dispatch=function(b){return a.data(this,"suppress."+b.type)-(new Date).getTime()>0?void a.removeData(this,"suppress."+b.type):e.apply(this,arguments)};var f=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(b,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&a.each(f.props,function(a,c){b[c]=d[c]})}return b}};c.dragitinit=c.dragitstart=c.dragitend=d}(jQuery);